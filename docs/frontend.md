# Frontend

This project uses **Vite** for bundling, **Tailwind CSS v4** for styling, and **DaisyUI** as the component library.

## Architecture

```
Root directory/
├── package.json                  # npm dependencies and scripts
├── vite.config.js                # Vite build configuration
├── tailwind.config.js            # Tailwind CSS configuration
└── postcss.config.js             # PostCSS configuration

apps/web/static/vendor/frontend/
├── css/
│   └── frontend.css              # Tailwind/DaisyUI imports (input file)
└── js/
    └── frontend.js               # JavaScript entry point (input file)

static/frontend/                  # Output directory (generated by Vite)
├── .vite/
│   └── manifest.json             # Asset manifest with hashed filenames
├── assets/
│   └── bundle-[hash].css         # Final compiled CSS
├── bundle-[hash].js              # Final bundled JavaScript
└── webfonts/                     # Font Awesome webfonts

apps/web/static/css/
├── main.scss                     # SCSS entry point for non-Tailwind custom overrides
└── custom.scss                   # Project-specific custom styles (non-Tailwind)
```

## Build Commands

### Development with Watch Mode

```bash
make frontend-dev
# or
npm run frontend:dev
```

### Production Build (Minified)

```bash
make frontend-prod
# or
npm run frontend:prod
```

**Important**: Always use `make frontend-prod` before committing frontend changes.

## Asset Manifest System

Vite generates `manifest.json` with hashed filenames. Django template tags resolve these paths automatically.

### Template Tags

Use `vite_all_css` and `vite_all_js` to automatically load all CSS and JS assets from the manifest:

```django
{% load pyaa_vite %}

{% vite_all_css %}
{% vite_all_js %}
```

These tags automatically discover all entry points in the manifest and generate the appropriate HTML tags, eliminating the need to manually specify entry names.

## Workflow

### Development

1. Start frontend watchers: `make frontend-dev`
2. Start Django server: `make run`
3. Edit templates, CSS, or JS files
4. Changes compile automatically

### Before Committing

```bash
make frontend-prod
git add static/frontend/
git commit -m "update frontend"
```

## Using DaisyUI

### Theme System

DaisyUI uses `data-theme` attribute:

```html
<html data-theme="light">
```

Available themes: `light`, `dark`, `cupcake`, `bumblebee`, `emerald`, `corporate`, `synthwave`, `retro`, `cyberpunk`, `valentine`, `halloween`, `garden`, `forest`, `aqua`, `lofi`, `pastel`, `fantasy`, `wireframe`, `black`, `luxury`, `dracula`, `cmyk`, `autumn`, `business`, `acid`, `lemonade`, `night`, `coffee`, `winter`, `dim`, `nord`, `sunset`.

### Components

See [DaisyUI Components](https://daisyui.com/components) for full documentation.

Common components: `btn`, `card`, `navbar`, `footer`, `menu`, `input`, `select`, `checkbox`, `toggle`, `radio`, `badge`, `alert`, `modal`, `dropdown`.

### Theme Switching

Toggle in HTML:

```html
<label class="swap swap-rotate">
  <input type="checkbox" class="theme-controller" value="dark">
  <i class="swap-on fa-solid fa-sun"></i>
  <i class="swap-off fa-solid fa-moon"></i>
</label>
```

## Non-Tailwind Styles

Use `custom.scss` for styles outside Tailwind:
- Third-party library overrides
- Complex SCSS features
- Styles independent of Tailwind

## Important Notes

### DO NOT Edit Output Files

Files in `static/frontend/` are auto-generated. Edit source files instead:
- `apps/web/static/vendor/frontend/css/frontend.css`
- `apps/web/static/vendor/frontend/js/frontend.js`
- `apps/web/static/css/custom.scss`

### Always Commit Output Files

Commit bundles after `make frontend-prod` for faster deployments.

### Prefer DaisyUI Components

Use semantic classes instead of custom CSS:

```html
<button class="btn btn-primary">Button</button>
```

## Troubleshooting

| Problem | Solution |
|---------|----------|
| CSS not appearing | Run `make frontend-dev`, clear browser cache |
| Bundle not updating | Delete `static/frontend/`, run `make frontend-prod` |
| DaisyUI not working | Verify `@plugin "daisyui"` in `frontend.css` |
| Template tag errors | Run `make frontend-prod` to generate manifest |

## Resources

- [Tailwind CSS](https://tailwindcss.com/docs)
- [DaisyUI Components](https://daisyui.com/components)
- [DaisyUI Themes](https://daisyui.com/docs/themes)
- [Vite](https://vitejs.dev/guide/)
- [Font Awesome](https://fontawesome.com/icons)
