{% load i18n %}
{% load static %}

<header class="sticky top-0 z-50 bg-base-100 border-b border-base-200">
    <div class="container mx-auto px-4">
        <div class="navbar min-h-14 p-0">
            <!-- LEFT: LOGO -->
            <div class="navbar-start">
                <a href="{% url 'home' %}" class="flex items-center gap-2">
                    <img src="{% static 'images/logo.png' %}" alt="{% translate 'site.small-name' %}" class="h-8 w-8" />
                    <span class="text-lg font-semibold tracking-tight">
                        {% translate "site.small-name" %}
                    </span>
                </a>
            </div>

            <!-- CENTER: DESKTOP MENU -->
            <div class="navbar-center hidden lg:flex">
                <ul class="menu menu-horizontal px-1 gap-1">
                    <li><a href="{% url 'home' %}">{% translate "menu.home" %}</a></li>
                    <li><a href="{% url 'gallery_index' %}">{% translate "menu.gallery" %}</a></li>
                    <li>
                        <details>
                            <summary>{% translate "menu.shop" %}</summary>
                            <ul class="p-2 bg-base-100">
                                <li>
                                    <a href="{% url 'shop_plans' 'subscription' %}">
                                        {% translate "menu.shop.plans-subscription" %}
                                    </a>
                                </li>
                                <li>
                                    <a href="{% url 'shop_plans' 'credit-purchase' %}">
                                        {% translate "menu.shop.plans-credit-purchase" %}
                                    </a>
                                </li>
                                <li>
                                    <a href="{% url 'shop_products' %}">
                                        {% translate "menu.shop.products" %}
                                    </a>
                                </li>
                            </ul>
                        </details>
                    </li>
                    <li><a href="{% url 'contact_index' %}">{% translate "menu.contact" %}</a></li>
                </ul>
            </div>

            <!-- RIGHT: ACTIONS + MOBILE MENU -->
            <div class="navbar-end gap-2">

                <!-- THEME TOGGLE -->
                <label class="swap swap-rotate btn btn-ghost btn-circle">
                    <input type="checkbox" class="theme-controller" value="dark" />
                    <svg class="swap-off w-5 h-5 fill-current" viewBox="0 0 24 24">
                        <path d="M12 5a7 7 0 100 14 7 7 0 000-14z" />
                    </svg>
                    <svg class="swap-on w-5 h-5 fill-current" viewBox="0 0 24 24">
                        <path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z" />
                    </svg>
                </label>

                <!-- AUTH (DESKTOP) -->
                {% if user.is_authenticated %}
                <span class="badge badge-primary hidden sm:inline">
                    {% translate "menu.credits" %}: {{ user.customer.credits|default:0 }}
                </span>
                <a href="{% url 'account_profile' %}" class="btn btn-ghost btn-sm hidden sm:inline-flex">
                    {% translate "menu.profile" %}
                </a>
                <a href="{% url 'account_logout' %}" class="btn btn-primary btn-sm hidden sm:inline-flex">
                    {% translate "menu.logout" %}
                </a>
                {% else %}
                <a href="{% url 'account_login' %}" class="btn btn-ghost btn-sm hidden sm:inline-flex">
                    {% translate "menu.login" %}
                </a>
                <a href="{% url 'account_signup' %}" class="btn btn-primary btn-sm hidden sm:inline-flex">
                    {% translate "menu.signup" %}
                </a>
                {% endif %}

                <!-- MOBILE MENU (RIGHT SIDE) -->
                <div class="dropdown dropdown-end lg:hidden">
                    <label tabindex="0" class="btn btn-ghost btn-circle">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24"
                            stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M4 6h16M4 12h16M4 18h16" />
                        </svg>
                    </label>

                    <ul tabindex="0"
                        class="menu menu-sm dropdown-content mt-3 z-[1] w-56 rounded-box bg-base-100 p-2 shadow">
                        <li><a href="{% url 'home' %}">{% translate "menu.home" %}</a></li>
                        <li><a href="{% url 'gallery_index' %}">{% translate "menu.gallery" %}</a></li>
                        <li>
                            <details>
                                <summary>{% translate "menu.shop" %}</summary>
                                <ul>
                                    <li>
                                        <a href="{% url 'shop_plans' 'subscription' %}">
                                            {% translate "menu.shop.plans-subscription" %}
                                        </a>
                                    </li>
                                    <li>
                                        <a href="{% url 'shop_plans' 'credit-purchase' %}">
                                            {% translate "menu.shop.plans-credit-purchase" %}
                                        </a>
                                    </li>
                                    <li>
                                        <a href="{% url 'shop_products' %}">
                                            {% translate "menu.shop.products" %}
                                        </a>
                                    </li>
                                </ul>
                            </details>
                        </li>
                        <li><a href="{% url 'contact_index' %}">{% translate "menu.contact" %}</a></li>

                        <li class="menu-title mt-2">
                            <span>{% translate "menu.account" %}</span>
                        </li>

                        {% if user.is_authenticated %}
                        <li class="disabled">
                            <span>{% translate "menu.credits" %}: {{ user.customer.credits|default:0 }}</span>
                        </li>
                        <li><a href="{% url 'account_profile' %}">{% translate "menu.profile" %}</a></li>
                        <li><a href="{% url 'account_logout' %}">{% translate "menu.logout" %}</a></li>
                        {% else %}
                        <li><a href="{% url 'account_login' %}">{% translate "menu.login" %}</a></li>
                        <li><a href="{% url 'account_signup' %}">{% translate "menu.signup" %}</a></li>
                        {% endif %}
                    </ul>
                </div>
            </div>
        </div>
    </div>
</header>
